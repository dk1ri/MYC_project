<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!--This file was converted to xhtml by OpenOffice.org - see http://xml.openoffice.org/odf2xhtml for more info.--><head profile="http://dublincore.org/documents/dcmi-terms/"><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/><title xml:lang="en-US">Commandrouter</title><meta name="DCTERMS.title" content="Commandrouter" xml:lang="en-US"/><meta name="DCTERMS.language" content="en-US" scheme="DCTERMS.RFC4646"/><meta name="DCTERMS.source" content="http://xml.openoffice.org/odf2xhtml"/><meta name="DCTERMS.creator" content="DK1RI"/><meta name="DCTERMS.issued" content="2012-02-01T18:05:06.26" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.contributor" content="DK1RI"/><meta name="DCTERMS.modified" content="2015-12-11T19:22:21.53" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.provenance" content="" xml:lang="en-US"/><meta name="DCTERMS.subject" content="," xml:lang="en-US"/><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" hreflang="en"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" hreflang="en"/><link rel="schema.DCTYPE" href="http://purl.org/dc/dcmitype/" hreflang="en"/><link rel="schema.DCAM" href="http://purl.org/dc/dcam/" hreflang="en"/><style type="text/css">
	@page {  }
	table { border-collapse:collapse; border-spacing:0; empty-cells:show }
	td, th { vertical-align:top; font-size:12pt;}
	h1, h2, h3, h4, h5, h6 { clear:both }
	ol, ul { margin:0; padding:0;}
	li { list-style: none; margin:0; padding:0;}
	<!-- "li span.odfLiEnd" - IE 7 issue-->
	li span. { clear: both; line-height:0; width:0; height:0; margin:0; padding:0; }
	span.footnodeNumber { padding-right:1em; }
	span.annotation_style_by_filter { font-size:95%; font-family:Arial; background-color:#fff000;  margin:0; border:0; padding:0;  }
	* { margin:0;}
	.P1 { font-size:12pt; font-family:Times New Roman; writing-mode:page; text-align:right ! important; }
	.P10 { font-size:12pt; font-family:Times New Roman; writing-mode:page; }
	.P11 { font-size:12pt; font-family:Times New Roman; writing-mode:page; text-align:justify ! important; }
	.P12 { font-size:12pt; font-family:Times New Roman; writing-mode:page; }
	.P3 { font-size:14pt; font-family:Times New Roman; writing-mode:page; text-align:center ! important; font-weight:bold; }
	.P4 { font-size:12pt; font-family:Times New Roman; writing-mode:page; font-weight:normal; }
	.P5 { font-size:12pt; font-family:Times New Roman; writing-mode:page; font-weight:normal; }
	.P6 { font-size:12pt; font-family:Times New Roman; writing-mode:page; font-weight:bold; }
	.P7 { font-size:11pt; font-family:Calibri; writing-mode:page; font-weight:normal; }
	.P8 { font-size:12pt; font-family:Times New Roman; writing-mode:page; font-weight:bold; }
	.P9 { font-size:12pt; font-family:Times New Roman; writing-mode:page; font-style:normal; font-weight:bold; }
	.Standard { font-size:12pt; font-family:Times New Roman; writing-mode:page; }
	.Bullet_20_Symbols { font-family:OpenSymbol; }
	.Internet_20_link { color:#000080; text-decoration:underline; }
	.T2 { font-style:italic; font-weight:bold; background-color:#ffff00; }
	<!-- ODF styles with no properties representable as CSS -->
	{ }
	</style></head><body dir="ltr" style="max-width:21.001cm;margin-top:2cm; margin-bottom:2cm; margin-left:2cm; margin-right:2cm; "><p class="P3">MYC Commandrouter</p><p class="P3"> </p><p class="Standard"> </p><p class="Standard">Author DK1RI Version V01.5, 20151211</p><p class="Standard"> </p><p class="Standard">Preliminary</p><p class="P8"> </p><p class="P8">Introduction</p><p class="Standard"> </p><p class="Standard">This paper describes my principles when writing the program. I hope,that the documentation within programm is sufficient.</p><p class="Standard">Nevertheless for understanding the program you must understand the MYC principles and the protocol detail details.</p><p class="Standard"> </p><p class="P8">Some limitations</p><p class="Standard"> </p><p class="Standard">This is my first python program, so enhancements are necessary.</p><p class="Standard">Coding is done quite basic, so object oriented programming is rarely used.</p><p class="Standard">The program is <span class="T2">not ready</span> and cannot be used as a commandrouter yet.</p><p class="Standard">The code is developed using pycharm under windows and not tested completely on a raspberry yet.</p><p class="Standard"> </p><p class="P9">Main missing topics</p><p class="Standard"> </p><ul><li><p class="P10" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm">–</span>handling of commands only, no answer and info handling<span class="odfLiEnd"/> </p></li><li><p class="P10" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm">–</span>no device interfaces<span class="odfLiEnd"/> </p></li><li><p class="P11" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm">–</span>no lower level CR<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P12" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm">–</span>keyboard and one ethernet interface only for user interface<span class="odfLiEnd"/> </p></li><li><p class="P12" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm">–</span>non blocking ethernet and keyboard handling for win and linux<span class="odfLiEnd"/> </p></li><li><p class="P12" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm">–</span>using interrupts?<span class="odfLiEnd"/> </p></li><li><p class="P12" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm">–</span>no logicdevice and rulesdevice support<span class="odfLiEnd"/> </p></li><li><p class="P12" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm">–</span>very limited errorhandling<span class="odfLiEnd"/> </p></li></ul><p class="Standard"> </p><p class="P8">Programming principles</p><p class="Standard"> </p><p class="Standard">The programm uses polling. After initialization following functions are polled:</p><p class="Standard">read keyboard to inputbuffer</p><p class="Standard">read network input to inputbuffer</p><p class="Standard">check inputbuffer ; one character per call and translate commandtoken</p><p class="Standard">transmit command to device when ready</p><p class="Standard">output answers to inputbuffer  to userinterface</p><p class="Standard">read device answer </p><p class="Standard">send answer buffer to inputbuffer </p><p class="Standard">handle timeout if no answer for a command </p><p class="Standard"> </p><p class="Standard">The program should run on a raspberry pi with limited cpu resources.</p><p class="Standard">Because the commandrouter must analyze any incoming byte, many lists and arrays are created during initialization. I am not sure, whether the used data structure is  the most effective (in terms of speed). So enhancements may be necessary.</p><p class="Standard">Sometimes the program lines are quite long and subarrays are hard to read. So I sometimes introduces variables with a “lifetime” over a few lines. This enhances the readability  but may reduce speed.</p><p class="Standard"> </p><p class="P8">Usage</p><p class="Standard"> </p><p class="Standard">The usage of the programm now is suitable for tests only.</p><p class="Standard">Input can be done by keyboard or via telnet by sending numbers 0... 255 followed by a space.</p><p class="Standard">Data, which should be send to to the device, are send to the console</p><p class="Standard"> </p><p class="P8">Implementation of the Hardware</p><p class="Standard"> </p><p class="Standard">The commandrouter should be implemented on a raspberry PI. A Raspberry has ethernet access and a complete operating system. Power consumption an price is also acceptable.</p><p class="Standard">May be that a web server for the Human Interface can also run on the same machine..</p><p class="Standard">not yet tested</p><p class="Standard"> </p><p class="P6">Copyright</p><p class="P7"> </p><p class="P5">Die Ideen in diesem Dokument unterliegen der GPL (Gnu Public Licence V2) soweit keine früheren, anderen Rechte betroffen sind.</p><p class="P5">The ideas of this document can be used under GPL (Gnu Public License V2) as long as no earlier other rights are affected.</p><p class="P4"> </p><p class="P8">References</p><p class="Standard"> </p><p class="Standard">[1]<span> <a href="http://www.dk1ri.de/common/myc/MYC_basic/MYC.pdf" class="Internet_20_link">MYC.pdf</a> </span></p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p></body></html>